<!DOCTYPE html>
<html>
	<head>
		<title>PWA demo</title>
		<link rel="manifest" href="manifest.json"/>
        <link rel="shortcut icon" href="launcher-icon-4x.png?pwa:2" type="image/png" sizes="192x192">
        <link rel="shortcut icon" href="favicon.ico?pwa:2" type="image/x-icon"/>
		<meta name="theme-color" content="#247324"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
		<script async src="pwa.bundle.js"></script>
    </head>
	<body>
        <div class="container" id="app">
            <div class="row">
                <div class="col-xs-12">
                    <h1>PWA demo</h1>

                    <experiment-warning v-bind:msg="message"></experiment-warning>

                    <div class="panel panel-default">
                        <div class="panel-body">
                            <p>
                                This is a Progressive Web App test by <a href="http://mdworld.nl">mdworld.nl</a>. The goal
                                is to make Web Apps behave more like Hybrid/Native Apps. The explored specs include:
                            </p>
                            <ul>
                                <li><a href="#homescreen">Homescreen</a></li>
                                <li><a href="#notification-api">Service Worker Notifications</a></li>
                                <li><a href="#notification-api">Service Worker Cache API</a></li>
                            </ul>
                            <a class="btn btn-primary btn-sm" href="https://github.com/mdvanes/pwa-demo/" target="_blank">Sources on Github</a>
                            <a class="btn btn-primary btn-sm" href="https://mdworld-pwa-demo.herokuapp.com" target="_blank">Run on Heroku</a>
                        </div>
                    </div>

                    <h2 id="homescreen">Homescreen</h2>
                    <p>
                        Following the <a href="https://developer.chrome.com/multidevice/android/installtohomescreen">Homescreen</a> spec, it's possible to install this site like an app to the Homescreen of an Android device.
                        To install:
                    </p>
                    <ul>
                        <li>Open this site on Chrome Mobile 47 or higher</li>
                        <li>Use the menu to select "Save to homescreen"</li>
                        <li>Now an icon will be added to the homescreen of the Android device</li>
                        <li>When started with this icon, a splash screen will be shown. This splash screen is generated from the web app manifest.json.</li>
                        <li>The app now runs as a standalone process.</li>
                    </ul>
                    <p>These features can be further explained based on my manifest.json:</p>
                        <pre>
{
  "name": "mdworld-pwa-demo",
  "description": "Demo for Progressive Web App",
  // Path to the icon that can be used on the homescreen
  "icons": [
    {
      "src": "launcher-icon-4x.png",
      "sizes": "192x192",
      "type": "image/png",
      "density": 4.0
    }
  ],
  "start_url": ".",
  "display": "standalone",      // Run like a standalone app, not as a Chrome tab
  "orientation": "portrait",
  "theme_color": "blue",        // This should work, but I still need the theme-color meta tag in the HTML
  "background_color": "red",
  "gcm_sender_id": "0123456789" // For notification API, see below
}</pre>

                    <h2 id="notification-api">Service Worker Notification API</h2>

                    <p>
                        Serviceworker Notifications do not work just like an <code>alert()</code> that happens to render
                        outside the browser. Because the Notification is ran on an Service Worker
                        (<a href="https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerRegistration/showNotification">docs</a>)
                        they are more capable: as long as the back-end server is running and sending
                        notifications through Google Cloud Messaging it will show up on the device that has registered
                        on it. Even if the browser is closed!<br/>
                        To test this, toggle "show notificatons" below to "on". This
                        will tell the server to send regular push notifications with the uptime of the server. The interval
                        is 60 seconds. After seeing a notification, try closing the browser and waiting for 60 seconds.
                        A notification should be still be shown.
                    </p>
                    <p>
                        Show notifications:
                        <toggle-notifications v-bind:checked="showNotifications"></toggle-notifications>
                    </p>

                    <h2 id="cache-api">Service Worker Cache API</h2>

                    <p>
                        The Cache API should give an offline experience, like a native/hybrid app. Even when an App requires
                        a connection to be fully functional, it can and should provide some features when offline or when
                        the network connection is not optimal. Normal browser cache would not work when the browser is offline
                        and the existing AppCache spec is (becoming) outdated. The Cache API allows for a very flexible solution
                        for adding offline experience to an App.<br/>
                        To test this, toggle offline mode in the browser console (or disable the network connection in a
                        different way) and reload the application.<br/>
                        Also note that the toggle for "show notifications" behaves differently when the device is offline.
                    </p>
                </div>
            </div>
        </div>

	</body>
</html>